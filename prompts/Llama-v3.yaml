_id: Llama-v3
templateFormat: hf
type: system
prompt:
  system: You are a helpful AI assistant.
template: >-
  {%- for message in messages %}
    {% if loop.first and messages[0]['role'] != 'system' %}
      {{- '<|start_header_id|>system<|end_header_id|>\n\n' + system + '<|eot_id|>' -}}
    {% endif %}
    {%- if message['role'] == 'system' -%}
      {{- '<|start_header_id|>system<|end_header_id|>\n\n' + message['content'] + '<|eot_id|>' -}}
    {%- else -%}
      {%- if message['role'] == 'user' -%}
        {{-'<|start_header_id|>user<|end_header_id|>\n\n' + message['content'] + '<|eot_id|>'-}}
      {%- else -%}
        {{-'<|start_header_id|>assistant<|end_header_id|>\n\n' + message['content'] + '<|end_header_id|>' -}}
      {%- endif -%}
    {%- endif -%}
  {%- endfor -%}

  {%- if add_generation_prompt -%}
      {{-'<|start_header_id|>assistant<|end_header_id|>\n\n'-}}
  {%- endif -%}
rule:
  - !re /^Meta[-](Llama)[-]3[-]\d+B[-]Instruct$/i
  - !re /^bagel(?:$|[-_])(?:8b)/i
parameters:
  llama:
    stop_words: ['<|eot_id|>']
